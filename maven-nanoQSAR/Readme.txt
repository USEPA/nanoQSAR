:: This script runs the nanoQSAR application using 3 jar files.

@echo off

echo Beginning execution of batch file.

echo Running batch script from %~dp0
cd %~dp0

:: This is where the first jar file is run, if no argument is
:: given after the jar file, a default filename of
:: nanoQSAR.properties is used.
echo Beginning execution of the data mining application.
java -jar nanoQSAR.jar
echo Ending execution of the data mining application.

:: This is where the second jar file is run.  Data is brought
:: in from the filename nanoQSAR.cvs, and the beta coefficients
:: are output to the filename nanoQSAR_BPLS.csv.
echo Beginning execution of the PLS Regression algorithm.
java -jar nanoQSAR_PLS.jar
echo Ending execution of the PLS Regression application.

:: This is where the third jar file is run.  Data is brought
:: in from the filename nanoQSAR_PLS.cvs where the
:: beta coefficients are stored, and from the nanoQSAR.csv file
:: from records with no results. The predicted results
:: are then output to the filename nanoQSAR_Predictions.csv.
echo Beginning execution of the Predictions algorithm.
java -jar nanoQSAR_Test.jar
echo Ending execution of the PLS Regression application.

echo Ending execution of batch file.

****************************************************************

The purpose of this nanoQSAR software project is to generate an equation which can be used to predict the in vitro viability (toxicity) of human cells exposed to different types and concentrations of nanomaterials.  The equation used for prediction is generated by performing a linear regression on data mined from the MySQL nanomaterial database “NaKnowBase” located on one of USEPA’s NCCT servers.  Currently, the database is limited by the few cases found in literature.  However, it will be expanded by USEPA toxicologist performing their own experiments; conducting in vitro assays using various concentration of other nanomaterials and adjusting other experimental parameters.

In the directory:

L:\Priv\Cin\NRMRL\CompTox\nanoQSAR

There is the batch file nanoQSAR.bat that first runs the jar file nanoQSAR.jar, and then runs the jar file nanoQSAR_PLS.jar.

The first jar file data mines the remote NaKnowBase and combines all of the data contained in many tables of the relational database, and converts all of this data to a simple speadsheet comma separated variables (CSV) format file nanoQSAR.csv.  Every record of this spreadsheet is a unique combination of data from the multiple tables in the relational database.

The second jar file reads the nanoQSAR.csv file and performs a linear regression (QSAR) on the data to find an equation that relates the descriptor variables in a record to the resultant variables in a record.   This analysis done is output to the file nanoQSAR_BPLS.csv  that contains the b coefficients of the equation Y = b0 + b1*X1 + b2 *X2 + … + bm * Xm , where Y is the predicted in vitro viability of human cells exposed to the varying concentrations of the nanomaterials, and Xi are descriptors of previous and future experiments, including properties of the nanomaterials.

This software can be tested by clicking on the nanoQSAR.bat file, either from the command line in that directory, or by clicking on it from the graphics display.  When executing from the command line, there are two numbers output, R2 and Q2avg.  Both of these take on values in the range [0.0,1.0] where 1.0 > R2 > Q2avg > 0.0 .  R2 is a measure of how well the model can be built to describe results, and Q2 measure how well the model predicts results by cross-validation.  In cross-validation, the data is randomly separated into two parts; the data used to build the model (training data) and the data used to test the model (test data).

As it is now, these values are close to R2 = 0.69 and Q2avg ~ 0.60, depending on the random division of training/test data.  This is primarily because the database is limited in the types of nanomaterials investigated and entered at this time.

There is also the file nanoQSAR-1-develop.zip in the directory mentioned above that contains all of the source code used to generate the jar files and the source code of the testers used to run all associated unit tests.  These files are Maven projects within Eclipse.  The source code for the jar files and testers can be compiled and run using Eclipse IDE.

If interested in setting this up using Eclipse IDE, please contact:

Paul Harten
Physical Scientist
US Environmental Protection Agency
(513) 569-7045
harten.paul@epa.gov



