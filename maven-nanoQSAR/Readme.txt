:: This script runs the nanoQSAR application using 3 jar files.

@echo off

echo Beginning execution of batch file.

echo Running batch script from %~dp0
cd %~dp0

:: First, the jar file below is run. If no argument is
:: given after the jar file name, a default properties file
:: named nanoQSAR.properties is used. The information needed
:: of all of the jar file runs are in the properties file.

echo Beginning execution of the data mining application.
java -jar nanoQSAR.jar
echo Ending execution of the data mining application.

:: Next, the second jar file is run.  By default, data is brought
:: in from the filename nanoQSAR.cvs, and the beta coefficients
:: are output to the filename nanoQSAR_BPLS.csv.

echo Beginning execution of the PLS Regression algorithm.
java -jar nanoQSAR_PLS.jar
echo Ending execution of the PLS Regression application.

:: Finally, the third jar file is run.  By default, the beta-
:: coefficients are brought in from the filename nanoQSAR_BPLS.cvs,
:: and from the nanoQSAR.csv file for the records with no results.
:: Experimental results are predicted for rows in nanoQSAR.csv that
:: contain no results alongside of predictions for rows that do have
:: the original results.

echo Beginning execution of the Predictions algorithm.
java -jar nanoQSAR_PRED.jar
echo Ending execution of the PLS Regression application.

echo Ending execution of batch file.

****************************************************************

The purpose of this nanoQSAR software project is to generate an
equation which can be used to predict the in vitro viability (toxicity)
of human cells exposed to different types and concentrations of nanomaterials.
The equation used for prediction is generated by performing a linear regression
on data mined from the MySQL nanomaterial database “NaKnowBase” located on one
of USEPA’s NCCT servers.  Currently, the database is limited by the few cases
found in literature.  However, it will be expanded by USEPA toxicologist
performing their own experiments; conducting in vitro assays using various
concentration of other nanomaterials and adjusting other experimental parameters.

In the directory:

L:\Priv\Cin\NRMRL\CompTox\nanoQSAR

There is the batch file nanoQSAR.bat that first runs the jar file nanoQSAR.jar,
then runs the jar file nanoQSAR_PLS.jar, and then the jar file nanoQSAR_PRED.jar.

The first jar file data mines the remote EPA database "NaKnowBase" and combines
all of the data contained in many tables of the relational database, and converts
all of this data to a simple spreadsheet comma separated variables (CSV) format file
nanoQSAR.csv.  Every record of this spreadsheet is a unique combination of data
from the multiple tables in the relational database.

The second jar file reads the nanoQSAR.csv file and performs a linear regression
(QSAR) on the data to find an equation that relates the descriptor variables in a
record to the resultant variables in a record.   This result of the analysis is
output to the file nanoQSAR_BPLS.csv and contains the beta-coefficients of the equation
Y = b0 + b1*X1 + b2*X2 + … + bm*Xm , where Y is the predicted in-vitro viability
of human cells exposed to varying concentrations of the nanomaterials, bx are the
calculated beta-coefficients, and Xi are descriptors of all experiments, including
properties of the nanomaterials.

The third jar file reads the filename nanoQSAR_BPLS.cvs where the beta-coefficients
are stored, and the nanoQSAR.csv file.  Experimental results are predicted for rows
in nanoQSAR.csv that contain no results. The predicted results are then output along
along with original results to the file nanoQSAR_Predictions.csv.

This software should be used by clicking on the nanoQSAR.bat file, either from the
command line in that directory, or by clicking on it from the graphics display.
Two R2 values are given in the nanoQSAR.log file.  The first R2 is a measure of how
well the model predicts viability training results, and the second R2 is a
measure of how well the model predicts LC50 training results.

There is also the file nanoQSAR-master.zip in the directory mentioned above that
contains all of the source code used to generate the jar files, and the source code
of the testers used to run all associated unit tests.  These files are Maven projects
within Eclipse.  The source code for the jar files and testers can be compiled and
run using Eclipse IDE.

If one is also interested in setting this up using Eclipse IDE, please contact:

Paul Harten
Physical Scientist
US Environmental Protection Agency
(513) 569-7045
harten.paul@epa.gov



